<!DOCTYPE html>
<html lang="fi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Hallinnoi opiskelutehtÃ¤viÃ¤ helposti OpiskeluToolsin tehtÃ¤vÃ¤listan avulla.">
    <meta name="keywords" content="tehtÃ¤vÃ¤t, tehtÃ¤vienhallinta, opiskelu, opiskelutyÃ¶kalut">
    <meta name="author" content="Enoch">
    <meta name="robots" content="index, follow">

    <title>TehtÃ¤vÃ¤t â€“ OpiskeluTools</title>

    <!-- Oma CSS-tyylitiedosto -->
    <link rel="stylesheet" href="style.css">
    <!-- Ulkoiset fontit Google Fontsista -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700&family=Open+Sans:wght@700&display=swap"
        rel="stylesheet">
    <!-- FontAwesome ikonikirjasto -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
    <!-- Sivun header-osio sisÃ¤ltÃ¤Ã¤ logon ja navigaation -->
    <header>
        <!-- Logo linkkinÃ¤ etusivulle -->
        <a href="index.html">
            <img src="logo.png" alt="OpiskeluTools logo" class="logo-img">
        </a>
        <!-- Sivuston nimi nÃ¤kyvissÃ¤ logon vieressÃ¤ -->
        <div class="logo">OpiskeluTools</div>
        <!-- Mobiilivalikon toiminnalisuus -->
        <button class="menu-toggle" aria-label="Avaa valikko">â˜°</button>
        <!-- Navigointilinkit muihin sivuihin -->
        <nav class="nav-links">
            <a href="muistiinpanot.html"><i class="fas fa-book"></i> Muistiinpanot</a>
            <a href="tehtavat.html"><i class="fas fa-tasks"></i> TehtÃ¤vÃ¤t</a>
            <a href="kalenteri.html"><i class="fas fa-calendar-alt"></i> Kalenteri</a>
            <a href="tietoa.html"><i class="fas fa-info-circle"></i> Tietoa</a>
        </nav>
    </header>

    <!-- Sivun pÃ¤Ã¤sisÃ¤ltÃ¶ -->
    <main class="container">
        <!-- Sivun otsikko ja esittelyteksti -->
        <h1>âœ… TehtÃ¤vÃ¤t</h1>
        <p>Voit lisÃ¤tÃ¤, merkitÃ¤ tehdyksi ja poistaa opiskelutehtÃ¤viÃ¤.</p>
        <!-- TehtÃ¤vÃ¤lista ja lomake -->
        <input type="text" id="taskInput" placeholder="Kirjoita uusi tehtÃ¤vÃ¤...">
        <input type="date" id="taskDeadline">
        <button id="addTask">â• LisÃ¤Ã¤ tehtÃ¤vÃ¤</button>
        <!-- TehtÃ¤vÃ¤lista -->
        <ul id="taskList"></ul>
        <!-- TehtÃ¤vÃ¤kuva -->
        <img src="tehtavat.jpg" alt="TehtÃ¤vÃ¤lista" class="task-img">
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <p>&copy; 2025 OpiskeluTools</p>
        <p><a href="#">ğŸ” Takaisin ylÃ¶s</a></p>
    </footer>

    <script>
        // Mobiilivalikon toiminnallisuus
        const menuToggle = document.querySelector(".menu-toggle");
        const nav = document.querySelector(".nav-links");

        // Avaa tai sulkee valiko
        menuToggle.addEventListener("click", (e) => {
            e.stopPropagation();
            nav.classList.toggle("active");
        });

        // Sulkee valikon, jos klikataan sen ulkopuolelle
        document.addEventListener("click", (e) => {
            if (!nav.contains(e.target) && !menuToggle.contains(e.target)) {
                nav.classList.remove("active");
            }
        });

        // Haetaan tarvittavat elementit
        const taskInput = document.getElementById("taskInput");
        const addTask = document.getElementById("addTask");
        const taskList = document.getElementById("taskList");

        // Funktio tehtÃ¤vien nÃ¤yttÃ¤miseen localStoragesta
        function renderTasks() {
            taskList.innerHTML = "";
            const tasks = JSON.parse(localStorage.getItem("tasks")) || [];

            tasks.forEach((task, index) => {
                const li = document.createElement("li");
                li.textContent = task.text;

                // Jos tehtÃ¤vÃ¤llÃ¤ on deadline, nÃ¤ytetÃ¤Ã¤n se
                if (task.deadline) {
                    const [year, month, day] = task.deadline.split("-");
                    const formattedDate = `${day}.${month}.${year}`;

                    const deadlineSpan = document.createElement("span");
                    deadlineSpan.textContent = ` (ğŸ”” ${formattedDate})`;
                    deadlineSpan.style.marginLeft = "10px";
                    deadlineSpan.style.fontStyle = "italic";
                    deadlineSpan.style.fontSize = "0.9em";


                    // ğŸ”´ Tarkistetaan onko deadline mennyt, jon on mennyt merkitÃ¤Ã¤Ã¤n punaisella
                    const today = new Date();
                    const deadlineDate = new Date(`${task.deadline}T23:59:59`);
                    if (deadlineDate < today && !task.done) {
                        deadlineSpan.style.color = "red";
                        deadlineSpan.title = "Deadline on vanhentunut!";
                    }
                    li.appendChild(deadlineSpan);
                }

                // Jos tehtÃ¤vÃ¤ on merkitty tehdyksi, lisÃ¤tÃ¤Ã¤n luokka
                if (task.done) li.classList.add("done");

                // Klikkaamalla tehtÃ¤vÃ¤Ã¤ vaihdetaan sen tila (tehty/ei tehty)
                li.addEventListener("click", () => {
                    tasks[index].done = !tasks[index].done;
                    localStorage.setItem("tasks", JSON.stringify(tasks));
                    renderTasks();
                });

                // Poistopainike tehtÃ¤vÃ¤lle
                const deleteBtn = document.createElement("button");
                deleteBtn.textContent = "âŒ";
                deleteBtn.className = "delete-btn";
                deleteBtn.addEventListener("click", (e) => {
                    e.stopPropagation();
                    tasks.splice(index, 1); // Poistetaan tehtÃ¤vÃ¤ listasta
                    localStorage.setItem("tasks", JSON.stringify(tasks));
                    renderTasks();
                });

                li.appendChild(deleteBtn);
                taskList.appendChild(li);
            });
        }

        // LisÃ¤Ã¤ tehtÃ¤vÃ¤ -painikkeen toiminta
        addTask.addEventListener("click", () => {
            const taskText = taskInput.value.trim();
            const deadline = document.getElementById("taskDeadline").value;

            if (taskText) {
                const tasks = JSON.parse(localStorage.getItem("tasks")) || [];
                tasks.push({ text: taskText, done: false, deadline: deadline });
                localStorage.setItem("tasks", JSON.stringify(tasks));
                taskInput.value = "";
                document.getElementById("taskDeadline").value = ""; // tyhjennÃ¤ kenttÃ¤
                renderTasks();
            }
        });

        // NÃ¤ytetÃ¤Ã¤n tehtÃ¤vÃ¤t sivun latauksessa
        renderTasks();
    </script>
</body>

</html>